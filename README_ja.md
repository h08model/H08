# H08（統合バージョン） v23について

このGitHubリポジトリは主にH08の開発に参加（貢献）するために使用されます。  
単にH08を使用したい場合は、このページの右エリアにある「Releases」メニューの最新リリース版（Latest）のtar.gz（またはzip）ファイルをダウンロードしてご利用下さい。  
H08マニュアル、および実行用サンプルデータは、[H08ウェブページ](https://h08.nies.go.jp/h08/manual.html)からダウンロードすることができます。

H08のコードはApache 2.0ライセンスで配布されています。  そのため、コードを自由に使用/変更することができます。  
(注：実行用サンプルデータとして[A-PLAT Pro](https://ccca-scenario.nies.go.jp/)から配布している気象データは、データ配布先のライセンスに従ってください)

現在、H08の更なる発展のために、外部貢献者からの開発協力手順について議論を進めています。

下記は、複数の外部貢献者からのコントリビューションをマージする方法についての暫定的な案です。

## ブランチの命名規則
- main：メイン・リポジトリ（最新の安定コードはこちら）
- release_v23.XX ：v23.XXとしてリリースされたコードアーカイブ (変更不可)
- develop23XX： v23.XXをベースにした開発ブランチのルート (ここからフォークしてコントリビュートしてください)
- dev23XX_PROJ : 開発プロジェクトを開発ブランチにマージするための作業ブランチ (プルリクエスト希望の連絡をいただいた貢献者に、変更をマージするための専用作業ブランチをこちらで作成して連絡します)

## 新しいスキーム追加等のアップデートをリクエストする手順
1. H08のmainに統合する新スキームをお持ちの方は、リポジトリ管理者までご相談ください。
2. 開発チームへの招待を受け、開発ブランチ：develop23XXをフォークしてください。
3. 以下のルールに従って、修正を行ってください。
   - 追加されたスキームはスイッチでオン／オフできるようにしてください。新しいスキームをオフにしても元のコードに影響がなければなお良いです。
   - 複数のコントリビュータによる新しいスキームがコンフリクトを引き起こす場合は、リポジトリ管理者に相談してください。
   - 新しいスキームでH08を実行するためのサンプルスクリプトを用意していただけるとありがたいです。可能であれば、他の人が実行できるようにスクリプトを設計してください。例えば、絶対パスを避ける、環境依存のシバンを避ける(例: #!/usr/local/python)、必要なライブラリを記述するなどです。
   - 新しいスキームの実行に追加データが必要な場合は、新しいスキームが必要とするサンプルデータを用意してください（サンプルデータのサイズは最小であればなおよいです）。ただし、データはGitHubの外に置いてください。新しいスキームでデータが必要な場合は、管理方法を検討しますので、リポジトリ管理者までご連絡ください。
4. あなたのコードをマージする準備ができましたら、リポジトリ管理者に連絡してください。その後、あなたのコミットをマージするための作業ブランチ dev23XX_PROJ をリポジトリ管理者が作成します。
   - dev23XX_PROJをフォークし、この作業ブランチdev23XX_PROJにあなたの変更を反映させて[^1]ください（必要な変更のみ）。
   - 複数人で開発しているため、dev23XX_PROJはあなたが最初にフォークした開発ブランチ（develop23XX）から変更されている可能性があります。解決できないコンフリクトを発見した場合は、リポジトリ管理者に相談してください。
5. dev23XX_PROJ ブランチにあなたの変更をプルリクエストしてください。
   - あなたのコミットがコンフリクトによってdev23XX_PROJ ブランチにマージできない場合は、あなたに連絡します。
6. あなたの新しい修正は、まずdev23XX_PROJ にマージされます。
   - リポジトリ管理者がテストシミュレーションを行い、あなたの修正がうまく機能することを確認します。
   - その後、リポジトリ管理者がdev23XX_PROJ ブランチをdevelop23XXブランチにマージします。
   - develop23XXブランチのmainブランチへのマージは、その後の検討とします。

[^1]: a. h08リポジトリページのリポジトリ名下にあるswitch選択ボタンで、dev23XX_PROJブランチを選択してdev23XX_PROJブランチ表示させます。<br>b. 右上の「Fork」ボタンをクリックして、dev23XX_PROJブランチを自分のGithubページにフォークしてきます。
<br>c. フォークしたdev23XX_PROJブランチをローカルリポジトリにgit pullします。  このときローカルで変更したファイルとgit pullしたブランチのファイル間でコンフリクトする場合があるので、コンフリクトを解消するようにローカルファイルを修正してから、dev23XX_PROJのgit pullを成功させてください。<br>d. ローカルにgit pullしたdev23XX_PROJブランチにcheckoutしてから、変更＆追加したファイルを登録します（git add & git commit）。このdev23XX_PROJブランチにおけるローカルリポジトリへの変更登録を反映と呼んでいます。
